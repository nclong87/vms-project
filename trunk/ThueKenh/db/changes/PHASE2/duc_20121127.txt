create or replace
FUNCTION            "SAVE_VMSGROUP" 
(
	id_	in VARCHAR2,
	namegroup_ in VARCHAR2,
  mainmenu_ in VARCHAR2
)
RETURN NUMBER AS
n NUMBER;
BEGIN
	if(id_ is not null) then --update
      update VMSGROUP set NAMEGROUP = namegroup_, MAINMENU = mainmenu_ where ID = to_number(id_);
	else --insert
		n := SEQ_VMSGROUP.nextval;
    if(mainmenu_ <> '-1') then
      insert into VMSGROUP(ID,NAMEGROUP,ACTIVE,MAINMENU) values (n,namegroup_,1,mainmenu_);
    else
      insert into VMSGROUP(ID,NAMEGROUP,ACTIVE,MAINMENU) values (n,namegroup_,1,null);
    end if;
    return n;
  end if;
  RETURN id_;
END SAVE_VMSGROUP;



create or replace
FUNCTION            "SAVE_ACCOUNT" 
(
	id_	in VARCHAR2,
	username_ in VARCHAR2,
	password_ in VARCHAR2,
	active_ in NUMBER,
	idkhuvuc_ in NUMBER,
	idphongban_ in NUMBER,
  idgroup_ in varchar2,
  mainmenu_ in varchar2
)
RETURN NUMBER AS
n NUMBER;
BEGIN
	if(id_ is not null) then --update
    if(password_ is not null) then
      update ACCOUNTS set IDGROUP = idgroup_, PASSWORD = password_, ACTIVE = active_, IDKHUVUC = idkhuvuc_, IDPHONGBAN = idphongban_, MAINMENU = mainmenu_ where ID = to_number(id_);
    else
      update ACCOUNTS set IDGROUP = idgroup_, ACTIVE = active_, IDKHUVUC = idkhuvuc_, IDPHONGBAN = idphongban_ where ID = to_number(id_);
    end if;
	else --insert
		n := SEQ_ACCOUNTS.nextval;
    if(mainmenu_ <> '-1') then
      insert into ACCOUNTS(ID,USERNAME,PASSWORD,IDGROUP,ACTIVE,IDKHUVUC,IDPHONGBAN,MAINMENU) values (n,username_,password_, idgroup_, active_,idkhuvuc_,idphongban_,mainmenu_);
    else
      insert into ACCOUNTS(ID,USERNAME,PASSWORD,IDGROUP,ACTIVE,IDKHUVUC,IDPHONGBAN,MAINMENU) values (n,username_,password_, idgroup_, active_,idkhuvuc_,idphongban_,null);
    end if;
    return n;
  end if;
  RETURN id_;
END SAVE_ACCOUNT;